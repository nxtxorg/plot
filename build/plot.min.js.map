{"version":3,"file":"plot.min.js","sources":["../src/plot.ts"],"sourcesContent":["import {NodeType, INxtx, Package, Node} from '../nxtx';\r\n\r\ndeclare const nxtx: INxtx;\r\n\r\nconst pkg: Package = {\r\n    name: 'plot',\r\n    commands: {\r\n        plot: (dictionaryNode: Node) => {\r\n            console.log(\"Drawing..\");\r\n            let {type, y, ylabel, xlabel} = dictionaryNode.value;\r\n            const canvas = <HTMLCanvasElement>nxtx.htmlLite(\"canvas\", {});\r\n\r\n            const ctx = canvas.getContext(\"2d\");\r\n\r\n            const canvasHeight = canvas.height = 100;\r\n            canvas.width = 100;\r\n\r\n            canvas.style.height = \"200px\";\r\n            canvas.style.width = \"400px\";\r\n\r\n            const normalizedY = normalize(y);\r\n\r\n            ctx.beginPath();\r\n            for (let i = 0; i < normalizedY.length - 1; i++) {\r\n                ctx.moveTo(i, normalizedY[i] * canvasHeight);\r\n                ctx.lineTo(i + 1, normalizedY[i + 1] * canvasHeight);\r\n                ctx.stroke();\r\n            }\r\n\r\n            console.log(\"Done drawing\");\r\n            return canvas;\r\n        }\r\n    },\r\n};\r\n\r\nfunction normalize(array) {\r\n    const min = Math.min(...array);\r\n    const max = Math.max(...array) - min;\r\n    return array.map(e => (e - min) / max);\r\n}\r\nif(nxtx) nxtx.registerPackage(pkg);\r\n\r\n\r\nexport default pkg;"],"names":["pkg","name","commands","plot","dictionaryNode","console","log","_a","y","canvas","nxtx","htmlLite","ctx","getContext","canvasHeight","height","width","style","array","min","max","normalizedY","Math","map","e","beginPath","i","length","moveTo","lineTo","stroke","registerPackage"],"mappings":"iCAIA,IAAMA,EAAe,CACjBC,KAAM,OACNC,SAAU,CACNC,KAAM,SAACC,GACHC,QAAQC,IAAI,aACR,IAAAC,UAAOC,eACLC,qBAA4BC,KAAKC,SAAS,SAAU,KAEpDC,EAAMH,EAAOI,WAAW,MAExBC,EAAeL,EAAOM,OAAS,IACrCN,EAAOO,MAAQ,IAEfP,EAAOQ,MAAMF,OAAS,QACtBN,EAAOQ,MAAMD,MAAQ,QAErB,IAeOE,EACTC,EACAC,EAjBQC,GAeCH,EAfuBV,EAgBhCW,EAAMG,KAAKH,UAALG,KAAYJ,GAClBE,EAAME,KAAKF,UAALE,KAAYJ,GAASC,EAC1BD,EAAMK,IAAI,SAAAC,GAAK,OAACA,EAAIL,GAAOC,KAhB1BR,EAAIa,YACJ,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAYM,OAAS,EAAGD,IACxCd,EAAIgB,OAAOF,EAAGL,EAAYK,GAAKZ,GAC/BF,EAAIiB,OAAOH,EAAI,EAAGL,EAAYK,EAAI,GAAKZ,GACvCF,EAAIkB,SAIR,OADAzB,QAAQC,IAAI,gBACLG,YAUhBC,MAAMA,KAAKqB,gBAAgB/B"}